name: Notify New Blog Post

on:
  push:
    paths:
      - 'content/posts/**.md'

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Send email notification
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: smtp.qq.com
          server_port: 465
          secure: true
          username: ${{ secrets.MAIL_USER }}
          password: ${{ secrets.MAIL_PASS }}

          subject: "ğŸ“¢ Hugo åšå®¢æ›´æ–°å•¦ï¼"
          to: 13545904054@163.com
          from: "Hugo Bot <${{ secrets.MAIL_USER }}>"
          body: |
            OneDayçš„åšå®¢æœ‰æ–°æ–‡ç« å‘å¸ƒ ğŸ‰

            åšå®¢åœ°å€ï¼š
            https://onedayoneday.xin

            æ—¶é—´ï¼š${{ github.event.head_commit.timestamp }}
